{% include '/general/header.twig' %}
<section>
  <div class="container d-flex flex-column">
    <div class="row align-items-center justify-content-center min-vh-100">

      <div class="col-md-8 col-lg-8 col-xl-8 py-6 py-md-0">
        <br><h4 class="text-center"><img class="rounded mx-auto d-block w-15"
                                         src="{{ theme['icons']['icon']['500x500'] }}"
                                         alt="{{ config['name'] }}"></h4>
        <h4 class="text-center">{{ 'site.cp.setup'|language|replace({'@name': config['name'] }) }}</h4>
        <h6 class="text-center">{{ 'site.cp.setup.description' | language }}</h6>
        <br>
        <form method="post" autocomplete="on">
          <input type="hidden" name="action" value="startSetup">
          <input type="hidden" name="csrf" value="{{ csrf }}">

          {% if action != false %}
            {% if action['success'] == false %}
              {% set alert_color = "danger" %} {% set alert_icon = "exclamation-triangle" %}
            {% else %}
              {% set alert_color = "success" %} {% set alert_icon = "check" %}
            {% endif %}
            <div class="alert alert-group alert-{{ alert_color }} alert-icon" role="alert">
              <div class="alert-group-prepend">
                                        <span class="alert-group-icon text-">
                                            <i class="fas fa-{{ alert_icon }}"></i>
                                        </span>
              </div>
              <div class="alert-content">
                {{ action['message'] | language }}
              </div>

            </div>
          {% endif %}

          <div class="card">
            <div class="card-body">
              <h5 class="text-center">{{ 'site.cp.setup.address' | language }}</h5>
              <h6 class="text-center text-muted">{{ 'site.cp.setup.address.description' | language }}</h6>
              <br>
              <div class="row">
                <div class="form-group col-lg-3">
                  <label for="input-sex"
                         class="form-control-label">{{ 'general.address.sex' | language }}</label>
                  <select name="sex" id="input-sex" class="form-select" required autocomplete="sex">
                    <option {% if setup != false %} {% if setup['address']['sex'] == "m" %} selected {% endif %} {% endif %}
                      value="m">{{ 'general.address.sex.m' | language }}</option>
                    <option {% if setup != false %} {% if setup['address']['sex'] == "w" %} selected {% endif %} {% endif %}
                      value="w">{{ 'general.address.sex.w' | language }}</option>
                    <option {% if setup != false %} {% if setup['address']['sex'] == "d" %} selected {% endif %} {% endif %}
                      value="d">{{ 'general.address.sex.d' | language }}</option>
                    <option {% if setup != false %} {% if setup['address']['sex'] == "0" %} selected {% endif %} {% endif %}
                      value="0">{{ 'general.address.sex.0' | language }}</option>
                  </select>
                </div>
                <div class="form-group col-lg-4">
                  <label for="input-firstname" class="form-control-label">{{ 'general.address.firstname' | language }}
                    *</label>
                  <input {% if setup != false %} value="{{ setup['address']['firstname'] }}" {% endif %}
                    name="firstname" required type="text" class="form-control form-control-prepend"
                    id="input-firstname"
                    required
                    autocomplete="given-name"
                    placeholder="{{ 'general.address.firstname.placeholder' | language }}">
                </div>
                <div class="form-group col-lg-5">
                  <label for="input-lastname" class="form-control-label">{{ 'general.address.lastname' | language }}
                    *</label>
                  <input {% if setup != false %} value="{{ setup['address']['lastname'] }}" {% endif %}
                    name="lastname" required type="text" class="form-control form-control-prepend"
                    id="input-lastname"
                    required
                    autocomplete="last-name"
                    placeholder="{{ 'general.address.lastname.placeholder' | language }}">
                </div>
              </div>

              <div class="row">
                <div class="form-group col-lg-6">
                  <label for="input-company"
                         class="form-control-label">{{ 'general.address.company' | language }}</label>
                  <input {% if setup != false %} value="{{ setup['company'] }}" {% endif %}
                    name="company" type="text" class="form-control form-control-prepend"
                    id="input-company"
                    autocomplete="organization"
                    placeholder="{{ 'general.address.company.placeholder' | language }}">
                </div>
                <div class="form-group col-lg-6">
                  <label for="input-timezone"
                         class="form-control-label">{{ 'general.address.timezone' | language }}</label>
                  <select required name="timezone" id="input-timezone" class="form-select" required>
                    {% for timezone in timezones %}
                      <option
                        {% if setup != false %} {% if setup['address']['timezone'] == timezone %} selected {% endif %} {% else %} {% if timezone == "Europe/Berlin" %} selected {% endif %} {% endif %}
                        value="{{ timezone }}">{{ timezone }}</option>
                    {% endfor %}
                  </select>
                </div>
              </div>

              <div class="row">
                <div class="form-group col-lg-9">
                  <label for="input-street" class="form-control-label">{{ 'general.address.street' | language }}
                    *</label>
                  <input {% if setup != false %} value="{{ setup['address']['street'] }}" {% endif %}
                    name="street" type="text" class="form-control form-control-prepend"
                    id="input-street"
                    required
                    placeholder="{{ 'general.address.street.placeholder' | language }}">
                </div>
                <div class="form-group col-lg-3">
                  <label for="input-street_nr" class="form-control-label">{{ 'general.address.street_nr' | language }}
                    *</label>
                  <input {% if setup != false %} value="{{ setup['address']['street_nr'] }}" {% endif %}
                    name="street_nr" type="text" class="form-control form-control-prepend"
                    id="input-street_nr"
                    required
                    placeholder="{{ 'general.address.street_nr.placeholder' | language }}">
                </div>
              </div>

              <div class="row">
                <div class="form-group col-lg-4">
                  <label for="input-postcode" class="form-control-label">{{ 'general.address.postcode' | language }}
                    *</label>
                  <input {% if setup != false %} value="{{ setup['address']['postcode'] }}" {% endif %}
                    name="postcode" type="text" class="form-control form-control-prepend"
                    id="input-postcode"
                    required
                    autocomplete="postal-code"
                    placeholder="{{ 'general.address.postcode.placeholder' | language }}">
                </div>
                <div class="form-group col-lg-8">
                  <label for="input-city" class="form-control-label">{{ 'general.address.city' | language }}*</label>
                  <input {% if setup != false %} value="{{ setup['address']['city'] }}" {% endif %}
                    name="city" type="text" class="form-control form-control-prepend"
                    id="input-city"
                    required
                    autocomplete="street-address"
                    placeholder="{{ 'general.address.city.placeholder' | language }}">
                </div>
              </div>
              <div class="row">
                <div class="form-group col-lg-6">
                  <label for="input-state" class="form-control-label">{{ 'general.address.state' | language }}*</label>
                  <input {% if setup != false %} value="{{ setup['address']['state'] }}" {% endif %}
                    name="state" type="text" class="form-control form-control-prepend"
                    id="input-state" required
                    placeholder="{{ 'general.address.state.placeholder' | language }}">
                </div>


                <div class="form-group col-lg-6">
                  <label for="input-country" class="form-control-label">{{ 'general.address.country' | language }}
                    *</label>
                  <select required name="country" id="input-country" class="form-select">
                    {% for country in countrys %}
                      <option
                        {% if setup != false %}{% if setup['address']['country']  == country['code'] %} selected {% endif %}{% else %} {% if country['code'] == "DE" %} selected {% endif %} {% endif %}
                        value="{{ country['code'] }}">
                        {% if country[language['current']] is defined %}
                          {{ country[language['current']] }}
                        {% else %}
                          {{ country["en_US"] }}
                        {% endif %}
                      </option>
                    {% endfor %}
                  </select>
                </div>
              </div>
              <br>
              <p class="text-center text-muted">* {{ 'site.cp.setup.address.required' | language }}</p>

            </div>
          </div>

          <div class="card">
            <div class="card-body">
              <h5 class="text-center">{{ 'site.cp.setup.birthday' | language }}</h5>
              <br>
              <div class="row">
                <div class="form-group col-lg-6 offset-lg-3">
                  <label for="input-birthday"
                         class="form-control-label">{{ 'general.address.birthday' | language }}</label>
                  <input name="birthday" required data-date-format="d.m.Y" type="text" class="form-control"
                         data-mask="00.00.0000" maxlength="9"
                         id="input-birthday" data-bs-toggle="date"
                         value="{% if setup != false %}{{ setup['birthday']['date'] }}{% endif %}"
                         placeholder="{{ 'general.address.birthday.placeholder' | language }}">
                </div>
              </div>
            </div>
          </div>
          <div class="card">
            <div class="card-body">
              <h5 class="text-center">{{ 'site.cp.setup.legal' | language }}</h5>
              <h6 class="text-center text-muted">{{ 'site.cp.setup.legal.description' | language }}</h6>
              <br>
              <div class="row">
                <div class="form-group offset-lg-1">
                  <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="form-check-input" name="terms" required id="check-terms">
                    <label class="form-check-label"
                           for="check-terms">{{ 'site.cp.setup.legal.terms'|language|replace({'@terms': '<a href="@url">@site</a>'|replace({'@url': url ~ '/legal/terms', '@site': 'site.legal.terms'|language })|raw })|raw }}
                    </label>
                  </div>
                </div>
                <div class="form-group offset-lg-1">
                  <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="form-check-input" name="privacy" required id="check-privacy">
                    <label class="form-check-label"
                           for="check-privacy">{{ 'site.cp.setup.legal.privacy'|language|replace({'@privacy': '<a href="@url">@site</a>'|replace({'@url': url ~ '/legal/privacy', '@site': 'site.legal.privacy'|language })|raw })|raw }}
                    </label>
                  </div>
                </div>
                <div class="form-group offset-lg-1">
                  <div class="custom-control custom-checkbox">
                    <input
                      type="checkbox" {% if setup != false %} {% if setup['newsletter'] == "true" %} checked {% endif %} {% endif %}
                      class="form-check-input" name="newsletter" id="check-newsletter">
                    <label class="form-check-label"
                           for="check-newsletter">{{ 'site.cp.setup.legal.newsletter' | language }}</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="card">
            <div class="card-body">
              <h5 class="text-center">{{ 'site.cp.setup.end' | language }}</h5>
              <h6 class="text-center text-muted">{{ 'site.cp.setup.end.description' | language }}</h6>
              <br>
              <div class="row justify-content-center">
                <h4 class="text-center">
                  <button type="submit"
                          class="btn btn-primary btn-xl hover-scale-110">{{ 'site.cp.setup.end.btn' | language }}</button>
                </h4>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>
{% include '/general/footer.twig' %}