{% include '/general/header.twig' %}
<div class="container py-5 mt-4 mt-lg-5 mb-lg-4 my-xl-5">
    <div class="row pt-sm-2 pt-lg-0">
        {% include '/cp/teams/nav.twig' %}
        <!-- Page content-->
        <div class="col-lg-9">
            <div class="row">

                {% include 'cp/teams/services/include/info_nav.twig' %}

                <div class="col-lg-6 pb-2 pb-sm-4">
                    <section class="card p-md-2 p-xl-3 p-xxl-4 h-100">

                        <div class="card-body m-0 p-3">
                            <div class="row">
                                <div class="col-4">
                                    {% include 'cp/teams/services/include/lock.twig' %}
                                </div>
                                <div class="col-4">
                                    <h6 class="text-center">
                                        {{ service['service_id'] }}
                                    </h6>
                                </div>
                                <div class="col-4">
                                    <div class="text-end">
                    <span class="badge bg-warning fs-sm d-none"
                          id="taskBadge">{{ 'site.cp.service.proxmox.state.taskRunning' | language }}</span>
                                        <span class="badge bg-danger fs-sm d-none"
                                              id="stoppedBadge">{{ 'site.cp.service.proxmox.state.stopped' | language }}</span>
                                        <span class="badge bg-success fs-sm d-none"
                                              id="startedBadge">{{ 'site.cp.service.proxmox.state.running' | language }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body m-0 p-3">
                            <h4 class="text-center"><i class="fa-duotone fa-2x fa-server"></i></h4>
                            <h6 class="text-center">{{ service['name'] }}</h6>
                            <h6 class="text-center">{{ service['service_name'] }}</h6>
                        </div>
                    </section>
                </div>
                <div class="col-lg-6 pb-2 pb-sm-4">
                    <section class="card p-md-2 p-xl-3 p-xxl-4 h-100">
                        <div class="card-body align-items-center justify-content-center" style="display: block"
                             id="statusDiv">
                            <div class="row">
                                {% if "team.service.proxmox.start"|checkServicePermission %}
                                    <button type="button" id="startVM_BTN"
                                            class="btn btn-sm btn-success mb-2 w-100 actionButtons d-none">{{ 'site.cp.service.proxmox.start' | language }}</button>
                                {% endif %}
                                {% if "team.service.proxmox.stop"|checkServicePermission %}
                                    <button type="button" id="stopVM_BTN"
                                            class="btn btn-sm btn-danger mb-2 w-100 actionButtons qemu d-none"
                                            data-bs-toggle="tooltip"
                                            data-bs-placement="top"
                                            title="{{ 'site.cp.service.proxmox.actions.qemu'|language }}">{{ 'site.cp.service.proxmox.stop' | language }}</button>
                                {% endif %}
                                {% if "team.service.proxmox.kill"|checkServicePermission %}
                                    <button type="button" id="resetVM_BTN"
                                            class="btn btn-sm btn-danger mb-2 w-100 actionButtons d-none">{{ 'site.cp.service.proxmox.kill' | language }}</button>
                                {% endif %}
                                {% if "team.service.proxmox.restart"|checkServicePermission %}
                                    <button type="button" id="restartVM_BTN"
                                            class="btn btn-sm btn-warning mb-2 w-100 actionButtons qemu d-none"
                                            data-bs-toggle="tooltip"
                                            data-bs-placement="top"
                                            title="{{ 'site.cp.service.proxmox.actions.qemu'|language }}">{{ 'site.cp.service.proxmox.reboot' | language }}</button>
                                {% endif %}

                                {% if "team.service.loginInService"|checkServicePermission %}
                                    <button type="button"
                                            onclick="popupCenter('{{ dashURL }}/teams/{{ team['businessId'] }}/service/{{ service['businessId'] }}?vnc', '{{ config['name'] }}', '1000','600');"
                                            class="btn btn-sm btn-primary mb-2 w-100">{{ 'site.cp.service.proxmox.VNC' | language }}</button>
                                {% endif %}
                            </div>
                        </div>
                        <div class="card-body align-items-center justify-content-center m-auto" id="statusLoading"
                             style="display: none">
                            <div style="width: 5rem; height: 5rem" class="spinner-border text-success"
                                 role="status">
                                <span class="sr-only">Loading...</span>
                            </div>
                        </div>
                    </section>
                </div>
                <div class="col-lg-12 pb-2 pb-sm-4">
                    <div class="alert alert-group alert-warning alert-icon d-none" id="taskRunningMessage"
                         role="alert">
                        <div class="alert-group-prepend"><span
                                    class="alert-group-icon text-"><i
                                        class="fa-duotone fa-exclamation"></i></span>
                        </div>
                        <div
                                class="alert-content">{{ 'site.cp.service.proxmox.taskRunning' | language }}</div>
                    </div>
                    <div class="alert alert-group alert-warning alert-icon d-none" id="jobRunningMessage"
                         role="alert">
                        <div class="alert-group-prepend"><span
                                    class="alert-group-icon text-"><i
                                        class="fa-duotone fa-exclamation"></i></span>
                        </div>
                        <div
                                class="alert-content">{{ 'site.cp.service.proxmox.jobRunning' | language }}</div>
                    </div>
                    <section class="card">
                        <div class="card-body">
                            <ul class="nav nav-tabs  justify-content-center" id="myTab" role="tablist">

                                {% include 'cp/teams/services/include/tabs_nav.twig' %}

                                {% if "team.service.proxmox.stats"|checkServicePermission and (service['state'] == 1 or service['state'] == 6) %}
                                    <li class="nav-item">
                                        <a href="#stats" class="nav-link" data-bs-toggle="tab" role="tab">
                                            {{ 'site.cp.service.tab.proxmox.stats' | language }}
                                        </a>
                                    </li>
                                {% endif %}


                                <li class="nav-item dropdown serviceTabs">
                                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"
                                       role="button">{{ 'site.cp.service.tab.more' | language }}</a>
                                    <div class="dropdown-menu">
                                        {% if "team.service.proxmox.rdns"|checkServicePermission and (service['state'] == 1 or service['state'] == 6) %}
                                            <a href="#rDNS" class="dropdown-item" data-bs-toggle="tab"
                                               role="tab">{{ 'site.cp.service.tab.proxmox.rDNS' | language }}</a>
                                        {% endif %}
                                        {% if "team.service.proxmox.settings"|checkServicePermission and (service['state'] == 1 or service['state'] == 6) %}
                                            <a href="#settings" class="dropdown-item blockOnTask" data-bs-toggle="tab"
                                               role="tab">{{ 'site.cp.service.tab.proxmox.settings' | language }}</a>
                                        {% endif %}
                                        {% if "team.service.reinstall"|checkServicePermission and (service['state'] == 1 or service['state'] == 6) %}
                                            <a href="#reinstall" class="dropdown-item blockOnTask" data-bs-toggle="tab"
                                               role="tab">{{ 'site.cp.service.tab.proxmox.reinstall' | language }}</a>
                                        {% endif %}
                                        {% if "team.service.proxmox.backup"|checkServicePermission and (service['state'] == 1 or service['state'] == 6) %}
                                            <a href="#backup" class="dropdown-item blockOnTask" data-bs-toggle="tab"
                                               role="tab">{{ 'site.cp.service.tab.proxmox.backup' | language }}</a>
                                        {% endif %}
                                        {% if "team.service.proxmox.firewall"|checkServicePermission and (service['state'] == 1 or service['state'] == 6) %}
                                            <a href="#firewall" class="dropdown-item blockOnTask" data-bs-toggle="tab"
                                               id="firewall-tab"
                                               role="tab">{{ 'site.cp.service.tab.proxmox.firewall' | language }}</a>
                                        {% endif %}
                                        {% if "team.service.proxmox.vnet"|checkServicePermission and (service['state'] == 1 or service['state'] == 6) %}
                                            <a href="#vnet" class="dropdown-item blockOnTask" data-bs-toggle="tab"
                                               id="firewall-tab"
                                               role="tab">{{ 'site.cp.service.tab.proxmox.vnet' | language }}</a>
                                        {% endif %}
                                        {% if "team.service.proxmox.tasks"|checkServicePermission and (service['state'] == 1 or service['state'] == 6) %}
                                            <a href="#task" class="dropdown-item blockOnTask" data-bs-toggle="tab"
                                               id="task-tab"
                                               role="tab">{{ 'site.cp.service.tab.proxmox.task' | language }}</a>
                                        {% endif %}
                                    </div>
                                </li>
                            </ul>
                            <div class="tab-content">

                                {% include 'cp/teams/services/include/tabs.twig' %}

                                {% if "team.service.proxmox.tasks"|checkServicePermission and (service['state'] == 1 or service['state'] == 6) %}
                                    <div class="tab-pane fade" id="task" role="tabpanel">

                                        <div class="d-flex align-items-center mt-sm-n1 pb-4 mb-0 mb-lg-1 mb-xl-3"><i
                                                    class="fa-duotone fa-calendar-days text-primary lead pe-1 me-2"></i>
                                            <h2 class="h4 mb-0">{{ 'site.cp.service.tab.proxmox.task' | language }}</h2>
                                            <div class="me-2 mb-2 ms-auto" role="group" aria-label="Settings group">
                                                <button type="button"
                                                        class="btn btn-secondary btn-sm task_add">{{ 'site.cp.service.tab.proxmox.task.create' | language }}</button>
                                            </div>
                                        </div>

                                        <div class="modal modal-lg fade" id="editTaskModal" tabindex="-1" role="dialog">
                                            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable"
                                                 role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5
                                                                class="modal-title h6">{{ 'site.cp.service.tab.proxmox.task' | language }}</h5>
                                                        <button type="button" class="btn-close"
                                                                data-bs-dismiss="modal"
                                                                aria-label="Close"></button>
                                                    </div>
                                                    <div class="modal-body">
                                                        <input type="hidden" id="task_id">

                                                        <div class="row g-3">


                                                            <div class="col-lg-4">
                                                                <div class="form-group">
                                                                    <label for="task_expression_minute"
                                                                           class="form-label">{{ 'site.cp.service.tab.proxmox.task.expression.minute' | language }}</label>
                                                                    <select name="task_expression_minute"
                                                                            id="task_expression_minute"
                                                                            class="form-select">
                                                                        <option
                                                                                value="*">{{ 'site.cp.service.tab.proxmox.task.expression.minute.perMinute' | language }}</option>
                                                                        <option
                                                                                value="*/15">{{ 'site.cp.service.tab.proxmox.task.expression.minute.per15Minute' | language }}</option>
                                                                        <option
                                                                                value="*/30">{{ 'site.cp.service.tab.proxmox.task.expression.minute.per30Minute' | language }}</option>
                                                                        <option
                                                                                value="*/45">{{ 'site.cp.service.tab.proxmox.task.expression.minute.per45Minute' | language }}</option>
                                                                        {% for i in range(0, 59) %}
                                                                            <option value="{{ i }}">{{ i }}</option>
                                                                        {% endfor %}
                                                                    </select>
                                                                </div>
                                                            </div>

                                                            <div class="col-lg-4">
                                                                <div class="form-group">
                                                                    <label for="task_expression_hour"
                                                                           class="form-label">{{ 'site.cp.service.tab.proxmox.task.expression.hour' | language }}</label>
                                                                    <select name="task_expression_hour"
                                                                            id="task_expression_hour"
                                                                            class="form-select">
                                                                        <option
                                                                                value="*">{{ 'site.cp.service.tab.proxmox.task.expression.hour.perHour' | language }}</option>
                                                                        <option
                                                                                value="*/2">{{ 'site.cp.service.tab.proxmox.task.expression.hour.per2Hour' | language }}</option>
                                                                        <option
                                                                                value="*/4">{{ 'site.cp.service.tab.proxmox.task.expression.hour.per4Hour' | language }}</option>
                                                                        <option
                                                                                value="*/6">{{ 'site.cp.service.tab.proxmox.task.expression.hour.per6Hour' | language }}</option>
                                                                        <option
                                                                                value="*/8">{{ 'site.cp.service.tab.proxmox.task.expression.hour.per8Hour' | language }}</option>
                                                                        <option
                                                                                value="*/12">{{ 'site.cp.service.tab.proxmox.task.expression.hour.per12Hour' | language }}</option>
                                                                        {% for i in range(0, 23) %}
                                                                            <option value="{{ i }}">{{ i }}</option>
                                                                        {% endfor %}
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-4">
                                                                <div class="form-group">
                                                                    <label for="task_expression_dayOfWeek"
                                                                           class="form-label">{{ 'site.cp.service.tab.proxmox.task.expression.dayOfWeek' | language }}</label>
                                                                    <select name="task_expression_dayOfWeek"
                                                                            id="task_expression_dayOfWeek"
                                                                            class="form-select">
                                                                        <option
                                                                                value="*">{{ 'site.cp.service.tab.proxmox.task.expression.dayOfWeek.everyDay' | language }}</option>
                                                                        {% for i in range(1, 7) %}
                                                                            <option value="{{ i }}">{{ i }}</option>
                                                                        {% endfor %}
                                                                    </select>
                                                                </div>
                                                            </div>

                                                            <div class="col-lg-6">
                                                                <div class="form-group">
                                                                    <label for="task_expression_dayOfMonth"
                                                                           class="form-label">{{ 'site.cp.service.tab.proxmox.task.expression.dayOfMonth' | language }}</label>
                                                                    <select name="task_expression_dayOfMonth"
                                                                            id="task_expression_dayOfMonth"
                                                                            class="form-select">
                                                                        <option
                                                                                value="*">{{ 'site.cp.service.tab.proxmox.task.expression.dayOfMonth.perDay' | language }}</option>
                                                                        <option
                                                                                value="*/2">{{ 'site.cp.service.tab.proxmox.task.expression.dayOfMonth.per2Day' | language }}</option>
                                                                        <option
                                                                                value="*/4">{{ 'site.cp.service.tab.proxmox.task.expression.dayOfMonth.per4Day' | language }}</option>
                                                                        <option
                                                                                value="*/6">{{ 'site.cp.service.tab.proxmox.task.expression.dayOfMonth.per6Day' | language }}</option>
                                                                        <option
                                                                                value="*/8">{{ 'site.cp.service.tab.proxmox.task.expression.dayOfMonth.per8Day' | language }}</option>
                                                                        <option
                                                                                value="*/12">{{ 'site.cp.service.tab.proxmox.task.expression.dayOfMonth.per12Day' | language }}</option>
                                                                        <option
                                                                                value="*/15">{{ 'site.cp.service.tab.proxmox.task.expression.dayOfMonth.per15Day' | language }}</option>
                                                                        <option
                                                                                value="*/20">{{ 'site.cp.service.tab.proxmox.task.expression.dayOfMonth.per20Day' | language }}</option>
                                                                        <option
                                                                                value="*/25">{{ 'site.cp.service.tab.proxmox.task.expression.dayOfMonth.per25Day' | language }}</option>
                                                                        <option
                                                                                value="*/30">{{ 'site.cp.service.tab.proxmox.task.expression.dayOfMonth.per30Day' | language }}</option>
                                                                        {% for i in range(1, 31) %}
                                                                            <option value="{{ i }}">{{ i }}</option>
                                                                        {% endfor %}
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-6">
                                                                <div class="form-group">
                                                                    <label for="task_expression_month"
                                                                           class="form-label">{{ 'site.cp.service.tab.proxmox.task.expression.month' | language }}</label>
                                                                    <select name="task_expression_month"
                                                                            id="task_expression_month"
                                                                            class="form-select">
                                                                        <option
                                                                                value="*">{{ 'site.cp.service.tab.proxmox.task.expression.month.perMonth' | language }}</option>
                                                                        <option
                                                                                value="*/2">{{ 'site.cp.service.tab.proxmox.task.expression.month.per2Month' | language }}</option>
                                                                        <option
                                                                                value="*/4">{{ 'site.cp.service.tab.proxmox.task.expression.month.per4Month' | language }}</option>
                                                                        <option
                                                                                value="*/6">{{ 'site.cp.service.tab.proxmox.task.expression.month.per6Month' | language }}</option>
                                                                        <option
                                                                                value="*/8">{{ 'site.cp.service.tab.proxmox.task.expression.month.per8Month' | language }}</option>
                                                                        <option
                                                                                value="*/12">{{ 'site.cp.service.tab.proxmox.task.expression.month.per12Month' | language }}</option>
                                                                        {% for i in range(1, 12) %}
                                                                            <option value="{{ i }}">{{ i }}</option>
                                                                        {% endfor %}
                                                                    </select>
                                                                </div>
                                                            </div>

                                                            <div class="col-lg-12">
                                                                <div class="form-group">
                                                                    <label for="task_expression"
                                                                           class="form-label">{{ 'site.cp.service.tab.proxmox.task.expression' | language }}</label>
                                                                    <input name="task_expression" id="task_expression"
                                                                           class="form-control" required
                                                                           placeholder="* * * * *">
                                                                </div>
                                                            </div>

                                                            <hr/>

                                                            <div class="col-lg-6">
                                                                <div class="form-group">
                                                                    <label for="task_task"
                                                                           class="form-label">{{ 'site.cp.service.tab.proxmox.task.taskName' | language }}</label>
                                                                    <select name="task_task" id="task_task"
                                                                            class="form-select"
                                                                            required>
                                                                    </select>
                                                                </div>
                                                            </div>

                                                            <div class="col-lg-6">
                                                                <div class="form-group">
                                                                    <label for="task_name"
                                                                           class="form-label">{{ 'site.cp.service.tab.proxmox.task.name' | language }}</label>
                                                                    <input name="task_name" id="task_name"
                                                                           class="form-control" required
                                                                           placeholder="Task">
                                                                </div>
                                                            </div>

                                                            <div class="col-lg-12">
                                                                <div class="form-group">
                                                                    <input name="task_notification"
                                                                           id="task_notification" type="checkbox"
                                                                           class="form-check-input" required>
                                                                    <label for="task_notification"
                                                                           class="form-check-label">{{ 'site.cp.service.tab.proxmox.task.notification' | language }}</label>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" id="task_edit_btn"
                                                                class="btn btn-primary">{{ 'general.modal.saveBtn' | language }}</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row g-3">
                                            <div class="table-responsive">
                                                <table class="table align-middle" id="tasksTable">
                                                    <thead>
                                                    <tr>
                                                        <td>{{ 'site.cp.service.tab.proxmox.task.name' | language }}</td>
                                                        <td>{{ 'site.cp.service.tab.proxmox.task.taskName' | language }}</td>
                                                        <td>{{ 'site.cp.service.tab.proxmox.task.expression' | language }}</td>
                                                        <td>{{ 'site.cp.service.tab.proxmox.task.nextRun' | language }}</td>
                                                        <td>{{ 'site.cp.service.tab.proxmox.task.lastRun' | language }}</td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    </thead>
                                                    <tbody>

                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                                {% if "team.service.proxmox.vnet"|checkServicePermission and (service['state'] == 1 or service['state'] == 6) %}
                                    <div class="tab-pane fade" id="vnet" role="tabpanel">
                                        <div class="modal fade" id="configureNetToVmModal" tabindex="-1" role="dialog">
                                            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable"
                                                 role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5
                                                                class="modal-title h6">{{ 'site.cp.service.tab.proxmox.vnet.config' | language }}</h5>
                                                        <button type="button" class="btn-close"
                                                                data-bs-dismiss="modal"
                                                                aria-label="Close"></button>
                                                    </div>
                                                    <div class="modal-body">
                                                        <input type="hidden" class="configureNetToVmModalId">

                                                        <div class="row g-3">
                                                            <div class="col-lg-12">
                                                                <div class="form-group">
                                                                    <label for="configureNetToVmModalIp"
                                                                           class="form-label">{{ 'site.cp.service.tab.proxmox.vnet.config.ip' | language }}</label>
                                                                    <input type="text" id="configureNetToVmModalIp"
                                                                           class="form-control configureNetToVmModalIp"
                                                                           required
                                                                           placeholder="">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button"
                                                                class="btn btn-primary configureNetToVmModalBtn">{{ 'general.modal.saveBtn' | language }}</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="d-flex align-items-center mt-sm-n1 pb-4 mb-0 mb-lg-1 mb-xl-3"><i
                                                    class="fa-duotone fa-chart-network text-primary lead pe-1 me-2"></i>
                                            <h2 class="h4 mb-0">{{ 'site.cp.service.tab.proxmox.vnet' | language }}</h2>
                                            <span class="badge bg-warning ms-2 text-end d-none "
                                                  id="vnet_pending">{{ 'site.cp.service.tab.proxmox.vnet.pending' | language }}</span>
                                            <div class="me-2 mb-2 ms-auto d-none d-md-block" role="group"
                                                 aria-label="Settings group">
                                                <button type="button"
                                                        class="btn btn-secondary btn-sm vnet_sub_create">{{ 'site.cp.service.tab.proxmox.vnet.createSubnet' | language }}</button>
                                                <button type="button"
                                                        class="btn btn-secondary btn-sm vnet_create">{{ 'site.cp.service.tab.proxmox.vnet.createVNet' | language }}</button>
                                                <button type="button"
                                                        class="btn btn-secondary btn-sm vnet_add_vnet_to_vm">{{ 'site.cp.service.tab.proxmox.vnet.addNet' | language }}</button>
                                                <button type="button"
                                                        class="btn btn-secondary btn-sm vnet_remove_vnet_to_vm">{{ 'site.cp.service.tab.proxmox.vnet.removeNet' | language }}</button>
                                            </div>
                                            <div class="me-2 mb-2 ms-auto d-block d-md-none" role="group"
                                                 aria-label="Settings group">
                                                <button type="button"
                                                        class="btn btn-secondary btn-sm vnet_sub_create"
                                                        data-bs-toggle="tooltip"
                                                        data-bs-placement="top"
                                                        title="{{ 'site.cp.service.tab.proxmox.vnet.createSubnet' | language }}">
                                                    <i
                                                            class="fa-duotone fa-plus"></i></button>
                                                <button type="button"
                                                        class="btn btn-secondary btn-sm vnet_create">{{ 'site.cp.service.tab.proxmox.vnet.createVNet' | language }}</button>
                                                <button type="button"
                                                        class="btn btn-secondary btn-sm vnet_add_vnet_to_vm"
                                                        data-bs-toggle="tooltip"
                                                        data-bs-placement="top"
                                                        title="{{ 'site.cp.service.tab.proxmox.vnet.addNew' | language }}">
                                                    <i
                                                            class="fa-duotone fa-network-wired"></i></button>
                                                <button type="button"
                                                        class="btn btn-secondary btn-sm vnet_remove_vnet_to_vm"
                                                        data-bs-toggle="tooltip"
                                                        data-bs-placement="top"
                                                        title="{{ 'site.cp.service.tab.proxmox.vnet.removeNet' | language }}">
                                                    <i
                                                            class="fa-duotone fa-eraser"></i></button>
                                            </div>
                                        </div>

                                        <div class="col d-none" id="vnet_subnet_demo">
                                            <div class="card h-100 rounded-3 p-3 ">
                                                <div class="d-flex align-items-center">
                                                    <h3 class="h6 text-nowrap text-truncate mb-0 vnet_ip"></h3>
                                                    <span class="badge bg-info ms-2 text-end vnet_mask"
                                                          data-bs-toggle="tooltip"
                                                          data-bs-placement="top"
                                                          title="{{ 'site.cp.service.tab.info.proxmox.address.netSize' | language }}"></span>
                                                    <span
                                                            class="badge bg-warning ms-2 text-end vnet_sub_pending d-none">{{ 'site.cp.service.tab.proxmox.vnet.pending' | language }}</span>
                                                    <span
                                                            class="badge bg-info ms-2 text-end vnet_sub_current d-none">{{ 'site.cp.service.tab.proxmox.vnet.current' | language }}</span>

                                                    <div class="d-flex ms-auto">
                                                        <button type="button" class="dropdown-item vnet_sub_delete">
                                                            <i
                                                                    class="nav-link text-danger fs-xl fw-normal py-1 pe-0 ps-1 ms-2 fa-duotone fa-trash-alt"></i>
                                                        </button>
                                                        <button type="button" class="dropdown-item vnet_sub_set">
                                                            <i
                                                                    class="nav-link text-info fs-xl fw-normal py-1 pe-0 ps-1 ms-2 fa-duotone fa-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="d-flex align-items-center">
                                                    <div class="fs-sm">
                                                        <div class="text-dark"><span class='vnet_gateway'></span></div>
                                                        <div class="text-dark vnet_current_ip"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row row-cols-1 row-cols-md-2 g-4 d-none" id="vnet_info">
                                        </div>

                                        <div class="row d-none" id="vnet_create_page">
                                            <div class="col-sm-12 col-md-12">
                                                <div class="alert alert-group alert-warning alert-icon"
                                                     role="alert">
                                                    <div class="alert-group-prepend"><span
                                                                class="alert-group-icon text-"><i
                                                                    class="fa-duotone fa-exclamation"></i></span>
                                                    </div>
                                                    <div class="alert-content">{{ 'site.cp.service.tab.proxmox.vnet.create' | language }}</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}

                                {% if "team.service.proxmox.firewall"|checkServicePermission and (service['state'] == 1 or service['state'] == 6) %}
                                    <div class="tab-pane fade" id="firewall" role="tabpanel"
                                         aria-labelledby="firewall-tab">
                                        <ul class="nav nav-tabs  justify-content-center" id="firewallTab"
                                            role="tablist">
                                            <li class="nav-item">
                                                <a href="#firewallRules" class="nav-link active" data-bs-toggle="tab"
                                                   role="tab">
                                                    {{ 'site.cp.service.tab.proxmox.firewall.rules' | language }}
                                                </a>
                                            </li>
                                            <li class="nav-item">
                                                <a href="#firewallAlias" class="nav-link" data-bs-toggle="tab"
                                                   role="tab">
                                                    {{ 'site.cp.service.tab.proxmox.firewall.alias' | language }}
                                                </a>
                                            </li>
                                            <li class="nav-item">
                                                <a href="#firewallIPSet" class="nav-link" data-bs-toggle="tab"
                                                   role="tab">
                                                    {{ 'site.cp.service.tab.proxmox.firewall.ipSet' | language }}
                                                </a>
                                            </li>
                                        </ul>
                                        <div class="tab-content">
                                            <div class="tab-pane fade" id="firewallIPSet" role="tabpanel">
                                                <div class="d-flex align-items-center mt-sm-n1 pb-4 mb-0 mb-lg-1 mb-xl-3">
                                                    <i
                                                            class="fa-duotone fa-layer-group text-primary lead pe-1 me-2"></i>
                                                    <h2 class="h4 mb-0">{{ 'site.cp.service.tab.proxmox.firewall.ipSet' | language }}</h2>
                                                    <div class="me-2 mb-2 ms-auto" role="group">
                                                        <button type="button" class="btn btn-secondary btn-icon"
                                                                id="firewallIpSetBtn">
                                                            <i class="fa-duotone fa-plus"></i></button>
                                                    </div>
                                                </div>

                                                <div class="modal modal-lg fade" id="firewallIpSetIpModal" tabindex="-1"
                                                     role="dialog">
                                                    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable"
                                                         role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5
                                                                        class="modal-title h6">{{ 'site.cp.service.tab.proxmox.firewall.ipSet' | language }}
                                                                    <button type="button"
                                                                            class="btn btn-info btn-sm btn-icon"
                                                                            id="firewallIpSetIpBtn"><i
                                                                                class="fa-duotone fa-plus"></i>
                                                                    </button>
                                                                </h5>
                                                                <button type="button" class="btn-close"
                                                                        data-bs-dismiss="modal"></button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <input type="hidden" id="firewallIpSetIpModalId">
                                                                <div class="table-responsive">
                                                                    <table class="table align-middle"
                                                                           id="firewallIpSetIpTable">
                                                                        <thead>
                                                                        <tr>
                                                                            <td>{{ 'site.cp.service.tab.proxmox.firewall.ipSet.cidr' | language }}</td>
                                                                            <td>{{ 'site.cp.service.tab.proxmox.firewall.comment' | language }}</td>
                                                                            <td>
                                                                            </td>
                                                                            <td></td>
                                                                        </tr>
                                                                        </thead>
                                                                        <tbody>

                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="modal fade" id="firewallIpSetModal" tabindex="-1"
                                                     role="dialog">
                                                    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable"
                                                         role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5
                                                                        class="modal-title h6">{{ 'site.cp.service.tab.proxmox.firewall.ipSet' | language }}</h5>
                                                                <button type="button" class="btn-close"
                                                                        data-bs-dismiss="modal"
                                                                        aria-label="Close"></button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <input type="hidden" id="firewallIpSetModalId">

                                                                <div class="row g-3">
                                                                    <div class="col-lg-12">
                                                                        <div class="form-group">
                                                                            <label for="firewallIpSetModalName"
                                                                                   class="form-label">{{ 'site.cp.service.tab.proxmox.firewall.ipSet.name' | language }}</label>
                                                                            <input type="text"
                                                                                   id="firewallIpSetModalName"
                                                                                   class="form-control" required
                                                                                   placeholder="{{ 'site.cp.service.tab.proxmox.firewall.ipSet.name' | language }}">
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-lg-12">
                                                                        <div class="form-group">
                                                                            <label for="firewallIpSetModalComment"
                                                                                   class="form-label">{{ 'site.cp.service.tab.proxmox.firewall.comment' | language }}</label>
                                                                            <input type="text"
                                                                                   id="firewallIpSetModalComment"
                                                                                   class="form-control" required
                                                                                   placeholder="{{ 'site.cp.service.tab.proxmox.firewall.comment' | language }}">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" id="firewallIpSetModalBtn"
                                                                        class="btn btn-primary">{{ 'general.modal.saveBtn' | language }}</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="modal fade" id="firewallIpSetIpAddModal" tabindex="-1"
                                                     role="dialog">
                                                    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable"
                                                         role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5
                                                                        class="modal-title h6">{{ 'site.cp.service.tab.proxmox.firewall.ipSet' | language }}</h5>
                                                                <button type="button" class="btn-close"
                                                                        data-bs-dismiss="modal"
                                                                        aria-label="Close"></button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <input type="hidden" id="firewallIpSetIpAddModalId">

                                                                <div class="row g-3">
                                                                    <div class="col-lg-12">
                                                                        <div class="form-group">
                                                                            <label for="firewallIpSetIpAddModalCidr"
                                                                                   class="form-label">{{ 'site.cp.service.tab.proxmox.firewall.ipSet.cidr' | language }}</label>
                                                                            <input type="search"
                                                                                   id="firewallIpSetIpAddModalCidr"
                                                                                   placeholder="127.0.0.3"
                                                                                   class="form-control" required
                                                                                   list="firewallIpSetIpAddModalCidrList">
                                                                            <datalist
                                                                                    id="firewallIpSetIpAddModalCidrList">

                                                                            </datalist>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-lg-12">
                                                                        <div class="form-group">
                                                                            <label for="firewallIpSetIpAddModalComment"
                                                                                   class="form-label">{{ 'site.cp.service.tab.proxmox.firewall.comment' | language }}</label>
                                                                            <input type="text"
                                                                                   id="firewallIpSetIpAddModalComment"
                                                                                   placeholder="{{ 'site.cp.service.tab.proxmox.firewall.comment' | language }}"
                                                                                   class="form-control" required>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" id="firewallIpSetIpAddModalBtn"
                                                                        class="btn btn-primary">{{ 'general.modal.saveBtn' | language }}</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row g-3">
                                                    <div class="table-responsive">
                                                        <table class="table align-middle" id="firewallIpSetTable">
                                                            <thead>
                                                            <tr>
                                                                <td>{{ 'site.cp.service.tab.proxmox.firewall.ipSet.name' | language }}</td>
                                                                <td>{{ 'site.cp.service.tab.proxmox.firewall.comment' | language }}</td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                            </thead>
                                                            <tbody>

                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>


                                            </div>
                                            <div class="tab-pane fade" id="firewallAlias" role="tabpanel">
                                                <div class="d-flex align-items-center mt-sm-n1 pb-4 mb-0 mb-lg-1 mb-xl-3">
                                                    <i
                                                            class="fa-duotone fa-input-text text-primary lead pe-1 me-2"></i>
                                                    <h2 class="h4 mb-0">{{ 'site.cp.service.tab.proxmox.firewall.alias' | language }}</h2>
                                                    <div class="me-2 mb-2 ms-auto" role="group">
                                                        <button type="button" class="btn btn-secondary btn-icon"
                                                                id="createFirewallAlias">
                                                            <i class="fa-duotone fa-plus"></i></button>
                                                    </div>
                                                </div>
                                                <div class="modal modal-lg fade" id="firewallAliasModal" tabindex="-1"
                                                     role="dialog">
                                                    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable"
                                                         role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5
                                                                        class="modal-title h6">{{ 'site.cp.service.tab.proxmox.firewall.alias' | language }}</h5>
                                                                <button type="button" class="btn-close"
                                                                        data-bs-dismiss="modal"
                                                                        aria-label="Close"></button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <input type="hidden" id="firewall_alias_id">

                                                                <div class="row g-3">
                                                                    <div class="col-lg-6">
                                                                        <div class="form-group">
                                                                            <label for="firewall_alias_name"
                                                                                   class="form-label">{{ 'site.cp.service.tab.proxmox.firewall.alias.name' | language }}</label>
                                                                            <input type="text"
                                                                                   name="firewall_alias_name"
                                                                                   id="firewall_alias_name"
                                                                                   class="form-control" required
                                                                                   placeholder="{{ 'site.cp.service.tab.proxmox.firewall.alias.name' | language }}">
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-lg-6">
                                                                        <div class="form-group">
                                                                            <label for="firewall_alias_cidr"
                                                                                   class="form-label">{{ 'site.cp.service.tab.proxmox.firewall.alias.cidr' | language }}</label>
                                                                            <input type="text"
                                                                                   name="firewall_alias_cidr"
                                                                                   id="firewall_alias_cidr"
                                                                                   class="form-control" required
                                                                                   placeholder="{{ 'site.cp.service.tab.proxmox.firewall.alias.cidr' | language }}">
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-lg-12">
                                                                        <div class="form-group">
                                                                            <label for="firewall_alias_comment"
                                                                                   class="form-label">{{ 'site.cp.service.tab.proxmox.firewall.comment' | language }}</label>
                                                                            <input type="text"
                                                                                   name="firewall_alias_comment"
                                                                                   id="firewall_alias_comment"
                                                                                   class="form-control" required
                                                                                   placeholder="{{ 'site.cp.service.tab.proxmox.firewall.comment' | language }}">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" id="firewall_alias_btn"
                                                                        class="btn btn-primary">{{ 'general.modal.saveBtn' | language }}</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row g-3">
                                                    <div class="table-responsive">
                                                        <table class="table align-middle" id="firewallAliasTable">
                                                            <thead>
                                                            <tr>
                                                                <td>{{ 'site.cp.service.tab.proxmox.firewall.alias.name' | language }}</td>
                                                                <td>{{ 'site.cp.service.tab.proxmox.firewall.alias.cidr' | language }}</td>
                                                                <td>{{ 'site.cp.service.tab.proxmox.firewall.comment' | language }}</td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                            </thead>
                                                            <tbody id="firewall_alias_body">
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="tab-pane fade show active" id="firewallRules" role="tabpanel">
                                                <div class="d-flex align-items-center mt-sm-n1 pb-4 mb-0 mb-lg-1 mb-xl-3">
                                                    <i
                                                            class="fa-duotone fa-viruses text-primary lead pe-1 me-2"></i>
                                                    <h2 class="h4 mb-0">{{ 'site.cp.service.tab.proxmox.firewall.rules' | language }}</h2>
                                                    <div class="me-2 mb-2 ms-auto" role="group">
                                                        <button type="button" class="btn btn-secondary btn-icon"
                                                                id="createFirewallRule">
                                                            <i class="fa-duotone fa-plus"></i></button>
                                                    </div>
                                                    <div class="modal modal-lg fade" id="firewallRuleModal"
                                                         tabindex="-1" role="dialog">
                                                        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable"
                                                             role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5
                                                                            class="modal-title h6">{{ 'site.cp.service.tab.proxmox.firewall.rules' | language }}</h5>
                                                                    <button type="button" class="btn-close"
                                                                            data-bs-dismiss="modal"
                                                                            aria-label="Close"></button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <input type="hidden" id="firewall_rule_id">

                                                                    <div class="row g-3">
                                                                        <div class="col-lg-6">
                                                                            <div class="form-group">
                                                                                <label for="firewall_rule_type"
                                                                                       class="form-label">{{ 'site.cp.service.tab.proxmox.firewall.rules.type' | language }}</label>
                                                                                <select name="firewall_rule_type"
                                                                                        id="firewall_rule_type"
                                                                                        class="form-select"
                                                                                        required>
                                                                                </select>
                                                                            </div>
                                                                        </div>

                                                                        <div class="col-lg-6">
                                                                            <div class="form-group">
                                                                                <label for="firewall_rule_action"
                                                                                       class="form-label">{{ 'site.cp.service.tab.proxmox.firewall.rules.action' | language }}</label>
                                                                                <select name="firewall_rule_action"
                                                                                        id="firewall_rule_action"
                                                                                        class="form-select"
                                                                                        required>
                                                                                </select>
                                                                            </div>
                                                                        </div>

                                                                        <div class="col-lg-8">

                                                                            <div class="form-group">
                                                                                <label for="firewall_rule_source"
                                                                                       class="form-label">{{ 'site.cp.service.tab.proxmox.firewall.rules.source' | language }}</label>
                                                                                <input name="firewall_rule_source"
                                                                                       id="firewall_rule_source"
                                                                                       class="form-control"
                                                                                       type="search"
                                                                                       list="firewall_rule_source_list"
                                                                                       placeholder="127.0.0.1"
                                                                                       required>
                                                                                <datalist
                                                                                        id="firewall_rule_source_list">
                                                                                </datalist>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-4">
                                                                            <div class="form-group">
                                                                                <label for="firewall_rule_sourcePort"
                                                                                       class="form-label">{{ 'site.cp.service.tab.proxmox.firewall.rules.sourcePort' | language }}</label>
                                                                                <input name="firewall_rule_sourcePort"
                                                                                       id="firewall_rule_sourcePort"
                                                                                       class="form-control" required
                                                                                       placeholder="0000">
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-8">
                                                                            <div class="form-group">
                                                                                <label for="firewall_rule_destination"
                                                                                       class="form-label">{{ 'site.cp.service.tab.proxmox.firewall.rules.destination' | language }}</label>
                                                                                <input name="firewall_rule_destination"
                                                                                       id="firewall_rule_destination"
                                                                                       type="search"
                                                                                       class="form-control" required
                                                                                       list="firewall_rule_destination_list"
                                                                                       placeholder="127.0.0.2">
                                                                                <datalist
                                                                                        id="firewall_rule_destination_list">
                                                                                </datalist>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-4">
                                                                            <div class="form-group">
                                                                                <label for="firewall_rule_destinationPort"
                                                                                       class="form-label">{{ 'site.cp.service.tab.proxmox.firewall.rules.destinationPort' | language }}</label>
                                                                                <input name="firewall_rule_destinationPort"
                                                                                       id="firewall_rule_destinationPort"
                                                                                       placeholder="0000"
                                                                                       class="form-control" required>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-6">
                                                                            <div class="form-group">
                                                                                <label for="firewall_rule_protocol"
                                                                                       class="form-label">{{ 'site.cp.service.tab.proxmox.firewall.rules.protocol' | language }}</label>
                                                                                <select name="firewall_rule_protocol"
                                                                                        id="firewall_rule_protocol"
                                                                                        class="form-select"
                                                                                        required>
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-6">

                                                                            <div class="form-group">
                                                                                <label for="firewall_rule_macro"
                                                                                       class="form-label">{{ 'site.cp.service.tab.proxmox.firewall.rules.macro' | language }}</label>
                                                                                <select name="firewall_rule_macro"
                                                                                        id="firewall_rule_macro"
                                                                                        class="form-select"
                                                                                        required>
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-12">
                                                                            <div class="form-group">
                                                                                <label for="firewall_rule_comment"
                                                                                       class="form-label">{{ 'site.cp.service.tab.proxmox.firewall.comment' | language }}</label>
                                                                                <input name="firewall_rule_comment"
                                                                                       id="firewall_rule_comment"
                                                                                       placeholder="{{ 'site.cp.service.tab.proxmox.firewall.comment' | language }}"
                                                                                       class="form-control"
                                                                                       required>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" id="firewall_rule_btn"
                                                                            class="btn btn-primary">{{ 'general.modal.saveBtn' | language }}</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                                <div class="row g-3">

                                                    <div class="table-responsive">
                                                        <table class="table align-middle" id="firewall_rules">
                                                            <thead>
                                                            <tr>
                                                                <td>{{ 'site.cp.service.tab.proxmox.firewall.rules.type' | language }}</td>
                                                                <td>{{ 'site.cp.service.tab.proxmox.firewall.rules.action' | language }}</td>
                                                                <td>{{ 'site.cp.service.tab.proxmox.firewall.rules.source' | language }}</td>
                                                                <td>{{ 'site.cp.service.tab.proxmox.firewall.rules.destination' | language }}</td>
                                                                <td>{{ 'site.cp.service.tab.proxmox.firewall.comment' | language }}</td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                            </thead>
                                                            <tbody id="firewall_rules_body">
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>

                                            </div>

                                        </div>

                                    </div>
                                {% endif %}

                                {% if "team.service.proxmox.backup"|checkServicePermission and (service['state'] == 1 or service['state'] == 6) %}
                                    <div class="tab-pane fade" id="backup" role="tabpanel"
                                         aria-labelledby="backup-tab">

                                        <div class="d-flex align-items-center mt-sm-n1 pb-4 mb-0 mb-lg-1 mb-xl-3"><i
                                                    class="fa-duotone fa-floppy-disks text-primary lead pe-1 me-2"></i>
                                            <h2 class="h4 mb-0">{{ 'site.cp.service.tab.proxmox.backup' | language }}</h2>
                                            <div class="me-2 mb-2 ms-auto" role="group" aria-label="Settings group">

                                                {% if service['reinstalling'] == false %}
                                                    {% if "team.service.proxmox.backup.create"|checkServicePermission %}
                                                        <button type="button"
                                                                class="btn btn-secondary btn-icon createBackupBtn"
                                                                style="display:none">
                                                            <i class="fa-duotone fa-plus"></i></button>
                                                    {% endif %}
                                                {% endif %}
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="modal fade" id="deleteBackupModal"
                                                     tabindex="-1"
                                                     role="dialog">
                                                    <div class="modal-dialog modal-dialog-centered" role="document">
                                                        <div class="modal-content text-left">
                                                            <input type="hidden" class="backup_id">
                                                            <div class="modal-header">
                                                                <h5
                                                                        class="modal-title">{{ 'site.cp.service.tab.proxmox.backup.delete' | language }}</h5>
                                                                <button type="button" class="btn-close"
                                                                        data-bs-dismiss="modal"
                                                                        aria-label="Close"></button>
                                                            </div>
                                                            <div class="modal-body">
                                                                {{ 'site.cp.service.tab.proxmox.backup.delete.info' | language }}
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button"
                                                                        class="btn btn-primary deleteBtn">{{ 'site.cp.service.tab.proxmox.backup.delete.btn' | language }}</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="modal fade" id="restoreBackupModal"
                                                     tabindex="-1"
                                                     role="dialog">
                                                    <div class="modal-dialog modal-dialog-centered" role="document">
                                                        <div class="modal-content text-left">
                                                            <input type="hidden" class="backup_id">
                                                            <div class="modal-header">
                                                                <h5
                                                                        class="modal-title">{{ 'site.cp.service.tab.proxmox.backup.restore' | language }}</h5>
                                                                <button type="button" class="btn-close"
                                                                        data-bs-dismiss="modal"
                                                                        aria-label="Close"></button>
                                                            </div>
                                                            <div class="modal-body">
                                                                {{ 'site.cp.service.tab.proxmox.backup.restore.info' | language }}
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button"
                                                                        class="btn btn-primary restoreBtn">{{ 'site.cp.service.tab.proxmox.backup.restore.btn' | language }}</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col demo_backup" style="display:none">
                                                    <div class="card h-100 rounded-3 p-3 p-sm-4">
                                                        <div class="d-flex align-items-center pb-2 mb-1">
                                                            <h3 class="h6 text-nowrap text-truncate mb-0 backup_date"></h3>
                                                            <i class="fa-duotone fa-badge-check fs-base text-success ms-2 backup_verified"
                                                               style="display:none"></i>
                                                            <i class="fa-duotone fa-seal-question fs-base text-warning ms-2 backup_failed"
                                                               style="display:none"></i>
                                                            <i class="fa-duotone fa-seal-exclamation fs-base text-danger ms-2 backup_unverified"
                                                               style="display:none"></i>
                                                            <div class="d-flex ms-auto">
                                                                {% if "team.service.proxmox.backup.delete"|checkServicePermission %}
                                                                    <button type="button"
                                                                            class="dropdown-item backupDeleteBtn">
                                                                        <i
                                                                                class="nav-link text-danger fs-xl fw-normal py-1 pe-0 ps-1 ms-2 fa-duotone fa-trash-alt"></i>
                                                                    </button>
                                                                {% endif %}
                                                                {% if "team.service.proxmox.backup.restore"|checkServicePermission %}
                                                                    <button type="button"
                                                                            class="dropdown-item backupRestoreBtn">
                                                                        <i
                                                                                class="nav-link text-warning fs-xl fw-normal py-1 pe-0 ps-1 ms-2 fa-duotone fa-trash-restore"></i>
                                                                    </button>
                                                                {% endif %}
                                                                {% if "team.service.proxmox.backup.protect"|checkServicePermission %}
                                                                    <button type="button"
                                                                            class="dropdown-item backupProtectBtn"
                                                                            style="display:none">
                                                                        <i
                                                                                class="nav-link text-danger fs-xl fw-normal py-1 pe-0 ps-1 ms-2 fa-duotone fa-lock-open"></i>
                                                                    </button>
                                                                    <button type="button"
                                                                            class="dropdown-item backupProtectRemoveBtn"
                                                                            style="display:none">
                                                                        <i
                                                                                class="nav-link text-success fs-xl fw-normal py-1 pe-0 ps-1 ms-2 fa-duotone fa-lock"></i>
                                                                    </button>
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                        <p class="mb-0 backup_size"></p>
                                                        <br>

                                                    </div>
                                                </div>
                                                <div class="row row-cols-1 row-cols-md-2 g-4 backupsList">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}

                                {% if "team.service.proxmox.rdns"|checkServicePermission and (service['state'] == 1 or service['state'] == 6) %}
                                    <div class="tab-pane fade" id="rDNS" role="tabpanel" aria-labelledby="rDNS-tab">
                                        <div class="d-flex align-items-center mt-sm-n1 pb-4 mb-0 mb-lg-1 mb-xl-3">
                                            <i
                                                    class="fa-duotone fa-mobile-signal text-primary lead pe-1 me-2"></i>
                                            <h2 class="h4 mb-0">{{ 'site.cp.service.tab.proxmox.rDNS' | language }}</h2>
                                            <div class="btn-group me-2 mb-2 ms-auto" role="group">
                                                <button type="button" data-bs-toggle="modal"
                                                        data-bs-target="#createRDns"
                                                        class="btn btn-dark btn-icon">
                                                    <i class="fa-duotone fa-plus"></i>
                                                </button>
                                            </div>
                                        </div>

                                        <div class="modal fade" id="createRDns" tabindex="-1" role="dialog">
                                            <div class="modal-dialog modal-dialog-centered"
                                                 role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5
                                                                class="modal-title h6">{{ 'site.cp.service.tab.proxmox.rDNS.create' | language }}</h5>
                                                        <button type="button" class="btn-close"
                                                                data-bs-dismiss="modal"
                                                                aria-label="Close"></button>
                                                    </div>

                                                    <script>
                                                        function rDnsSelect(select) {
                                                            var rDns = select.options[select.selectedIndex].text;
                                                            var arrayOfStrings = rDns.split("/");

                                                            document.getElementById('rDns_name').value = arrayOfStrings[0];
                                                        }
                                                    </script>
                                                    <div class="modal-body">

                                                        <div class="row g-3">
                                                            <div class="form-group">
                                                                <label for="ip_id"
                                                                       class="form-label">{{ 'site.cp.service.tab.proxmox.rDNS.net' | language }}</label>
                                                                <select name="ip_id" id="ip_id" class="form-select"
                                                                        onchange="rDnsSelect(this);"
                                                                        required>
                                                                    <option disabled
                                                                            selected>{{ 'site.cp.service.tab.proxmox.rDNS.net.select' | language }}</option>
                                                                    {% for address in proxmox['internal']['rdnsAv']['ipv4'] %}
                                                                        <option value="{{ address['id'] }}"
                                                                                content="{{ address['ip']~""~address['netSize'] }}">{{ address['ip']~""~address['netSize'] }}</option>
                                                                    {% endfor %}
                                                                    {% for address in proxmox['internal']['rdnsAv']['ipv6'] %}
                                                                        <option value="{{ address['id'] }}"
                                                                                content="{{ address['ip']~""~address['netSize'] }}">{{ address['ip']~""~address['netSize'] }}</option>
                                                                    {% endfor %}
                                                                </select>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="rDns_name"
                                                                       class="form-label">{{ 'site.cp.service.tab.proxmox.rDNS.address' | language }}</label>
                                                                <input id="rDns_name" class="form-control" name="name"
                                                                       value="" placeholder="127.0.0.1"
                                                                       required>
                                                            </div>
                                                            <div class="form-group">
                                                                <label class="form-label"
                                                                       for="rDns_content">{{ 'site.cp.service.tab.proxmox.rDNS.content' | language }}</label>
                                                                <input id="rDns_content" class="form-control"
                                                                       name="content"
                                                                       placeholder="mail.example.com" required>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" onclick="createRDNS(this);"
                                                                class="btn btn-primary">{{ 'general.modal.saveBtn' | language }}</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                        <div class="row g-3">

                                            <div class="table-responsive">
                                                <table class="table align-middle" id="rdns">
                                                    <thead>
                                                    <tr>
                                                        <td>{{ 'site.cp.service.tab.proxmox.rDNS.address' | language }}</td>
                                                        <td>{{ 'site.cp.service.tab.proxmox.rDNS.content' | language }}</td>
                                                        <td></td>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="rdns_body">
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>

                                {% endif %}

                                {% if "team.service.proxmox.stats"|checkServicePermission and (service['state'] == 1 or service['state'] == 6) %}
                                    <div class="tab-pane fade" id="stats" role="tabpanel" aria-labelledby="stats-tab">
                                        <div class="d-flex align-items-center"><i
                                                    class="fa-duotone fa-chart-line text-primary lead pe-1 me-2"></i>
                                            <h2 class="h4 mb-0">{{ 'site.cp.service.tab.proxmox.stats' | language }}</h2>
                                            <div class="me-2 mb-2 ms-auto" role="group" aria-label="Settings group">
                                                <button type="button" class="btn btn-secondary btn-icon"
                                                        data-bs-toggle="dropdown" aria-haspopup="true">
                                                    <i class="fa-duotone fa-gear"></i>
                                                </button>
                                                <div class="dropdown-menu my-1">
                                                    <button onclick="setStatsRange('hour')" class="dropdown-item">Hour
                                                    </button>
                                                    <button onclick="setStatsRange('day')" class="dropdown-item">Day
                                                    </button>
                                                    <button onclick="setStatsRange('week')" class="dropdown-item">Week
                                                    </button>
                                                    <button onclick="setStatsRange('month')" class="dropdown-item">
                                                        Month
                                                    </button>
                                                    <button onclick="setStatsRange('year')" class="dropdown-item">Year
                                                    </button>
                                                </div>
                                            </div>
                                        </div>


                                        <div class="row">
                                            <div class="col-sm-12">
                                                <canvas id="cpuStats" width="450" height="100"></canvas>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <canvas id="memStats" width="450" height="150"></canvas>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <canvas id="netStats" width="450" height="150"></canvas>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <canvas id="diskStats" width="450" height="150"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}

                                {% if "team.service.proxmox.settings"|checkServicePermission and (service['state'] == 1 or service['state'] == 6) %}
                                    <div class="tab-pane fade" id="settings" role="tabpanel"
                                         aria-labelledby="settings-tab">
                                        <div class="d-flex align-items-center mt-sm-n1 pb-4 mb-0 mb-lg-1 mb-xl-3"><i
                                                    class="fa-duotone fa-gear text-primary lead pe-1 me-2"></i>
                                            <h2 class="h4 mb-0">{{ 'site.cp.service.tab.proxmox.settings' | language }}</h2>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="row g-3 mb-4">
                                                    <div class="col-sm-12 col-md-12">
                                                        <form method="post">
                                                            <input type="hidden" name="action"
                                                                   value="changeRootPassword">
                                                            <input type="hidden" name="csrf" value="{{ csrf }}">
                                                            <div class="d-flex align-items-center pb-4 mt-sm-n1 mb-0 mb-lg-1 mb-xl-3">
                                                                <i
                                                                        class="fa-duotone fa-lock-keyhole text-primary lead pe-1 me-2"></i>
                                                                <h2
                                                                        class="h5 mb-0">{{ 'site.cp.service.tab.proxmox.settings.changeRootPassword' | language }}</h2>
                                                                <div class="btn-group me-2 mb-2 ms-auto"
                                                                     role="group"
                                                                     aria-label="Settings group">
                                                                    <button type="submit"
                                                                            class="btn btn-dark btn-icon">
                                                                        <i class="fa-duotone fa-floppy-disk"></i>
                                                                    </button>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label for="settings-password"
                                                                           class="form-label">{{ 'site.cp.service.tab.proxmox.settings.password' | language }}</label>
                                                                    <input class="form-control" type="password"
                                                                           id="settings-password"
                                                                           name="password"
                                                                           placeholder="********">
                                                                </div>
                                                            </div>


                                                        </form>
                                                    </div>
                                                </div>
                                                {% if sshKeys|length != 0 %}
                                                    <div class="row g-3 mb-4">
                                                        <hr/>
                                                        <div class="col-sm-12 col-md-12">

                                                            <form method="post">
                                                                <input type="hidden" name="csrf"
                                                                       value="{{ csrf }}">
                                                                <input type="hidden" name="action"
                                                                       value="changeSSHKeys">
                                                                <div class="d-flex align-items-center pb-4 mt-sm-n1 mb-0 mb-lg-1 mb-xl-3">
                                                                    <i
                                                                            class="fa-duotone fa-key text-primary lead pe-1 me-2"></i>
                                                                    <h2
                                                                            class="h5 mb-0">{{ 'site.cp.service.tab.proxmox.settings.changeSSHKeys' | language }}</h2>
                                                                    <div class="btn-group me-2 mb-2 ms-auto"
                                                                         role="group"
                                                                         aria-label="Settings group">
                                                                        <button type="submit"
                                                                                class="btn btn-dark btn-icon">
                                                                            <i class="fa-duotone fa-floppy-disk"></i>
                                                                        </button>
                                                                    </div>
                                                                </div>

                                                                <div class="row row-cols-1 row-cols-md-2 g-4">
                                                                    {% for key, value in sshKeys %}

                                                                        <div class="col">
                                                                            <div class="card h-100 rounded-3 p-3 p-sm-4">
                                                                                <div class="d-flex align-items-center pb-2 mb-1">
                                                                                    <h3 class="h6 text-nowrap text-truncate mb-0">{{ value['name'] }}</h3>
                                                                                    <div class="d-flex ms-auto">
                                                                                        <div class="form-check fs-xl fw-normal py-1 pe-0 ps-1 ms-2">
                                                                                            <input
                                                                                                    type="checkbox"
                                                                                                    class="form-check-input"
                                                                                                    name="key_id[]"
                                                                                                    id="radio-key-{{ key }}"
                                                                                                    value="{{ key }}"
                                                                                                    {% if key in proxmox['internal']['sshKeysId'] %}checked{% endif %} >
                                                                                            <label class="form-check-label"
                                                                                                   for="radio-key-{{ key }}"></label>
                                                                                        </div>

                                                                                    </div>
                                                                                </div>
                                                                                <p class="mb-0">{{ value['user']['name'] }}
                                                                                    <br>{{ value['fingerPrint'] }}
                                                                                </p>
                                                                                <br>

                                                                            </div>
                                                                        </div>

                                                                    {% endfor %}
                                                                </div>
                                                            </form>
                                                        </div>
                                                    </div>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}

                                {% if "team.service.reinstall"|checkServicePermission and (service['state'] == 1 or service['state'] == 6) %}

                                    <div class="tab-pane fade" id="reinstall" role="tabpanel"
                                         aria-labelledby="reinstall-tab">
                                        <div class="d-flex align-items-center mt-sm-n1 pb-4 mb-0 mb-lg-1 mb-xl-3"><i
                                                    class="fa-duotone fa-arrows-rotate text-primary lead pe-1 me-2"></i>
                                            <h2 class="h4 mb-0">{{ 'site.cp.service.tab.proxmox.reinstall' | language }}</h2>
                                        </div>
                                        <div class="row">
                                            {% if service['locked'] %}
                                                <div class="col-sm-12 col-md-12">
                                                    <div class="alert alert-group alert-warning alert-icon"
                                                         role="alert">
                                                        <div class="alert-group-prepend"><span
                                                                    class="alert-group-icon text-"><i
                                                                        class="fa-duotone fa-exclamation"></i></span>
                                                        </div>
                                                        <div class="alert-content">{{ 'site.cp.service.tab.serviceLocked' | language }}</div>
                                                    </div>
                                                </div>
                                            {% else %}

                                                <div class="col-lg-12 pb-2 pb-sm-4">
                                                    <div class="card">
                                                        <div class="card-body">
                                                            <div class="d-flex align-items-center">
                                                                <i class="fa-duotone fa-wand-magic-sparkles text-primary lead pe-1 me-2"></i>

                                                                <h5 class="h5 mb-0">{{ 'site.cp.service.tab.proxmox.reinstall.os' | language }}</h5>
                                                                <div class="btn-group me-2 mb-2 ms-auto">
                                                                    <button class="btn btn-dark btn-icon"
                                                                            id="reinstallBtn"><i class="fa fa-pen"></i>
                                                                    </button>
                                                                </div>
                                                                <div class="modal modal-danger fade" id="reinstallModal"
                                                                     tabindex="-1" role="dialog"
                                                                     aria-labelledby="reinstall" aria-hidden="true">
                                                                    <div class="modal-dialog modal-dialog-centered"
                                                                         role="document">
                                                                        <div class="modal-content">
                                                                            <div class="modal-header">
                                                                                <h5
                                                                                        class="modal-title h6">{{ 'site.cp.service.tab.proxmox.reinstall.os' | language }}</h5>
                                                                                <button type="button" class="btn-close"
                                                                                        data-bs-dismiss="modal"></button>
                                                                            </div>
                                                                            <div class="modal-body">
                                                                                <div class="row g-1">
                                                                                    <div class="py-3 text-center">
                                                                                        <i class="fa-duotone fa-exclamation-circle fa-4x"></i>
                                                                                        <h5
                                                                                                class="heading h4 mt-4">{{ 'site.cp.service.tab.proxmox.reinstall.os.modal.warn.title' | language }}</h5>
                                                                                        <p>{{ 'site.cp.service.tab.proxmox.reinstall.os.modal.warn.description' | language }}</p>
                                                                                    </div>

                                                                                    <div class="form-group">
                                                                                        <label for="reinstallModalOs"
                                                                                               class="form-label">{{ 'site.cp.service.tab.proxmox.reinstall.os.modal.os' | language }}</label>
                                                                                        <select id="reinstallModalOs"
                                                                                                class="form-select">
                                                                                            {% for os in proxmox['internal']['allOS'] %}
                                                                                                <option
                                                                                                        value="{{ os['os'] }}" {% if proxmox['internal']['os']['name'] == os['os'] %} selected {% endif %}>{{ os['name'] }}</option>
                                                                                            {% endfor %}
                                                                                        </select>
                                                                                    </div>

                                                                                </div>
                                                                            </div>
                                                                            <div class="modal-footer">
                                                                                <button type="button"
                                                                                        id="reinstallModalBtn"
                                                                                        class="btn btn-danger">{{ 'site.cp.service.tab.proxmox.reinstall.os.modal.btn' | language }}</button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-12 pb-2 pb-sm-4">
                                                    <div class="card">
                                                        <div class="card-body">
                                                            <div class="d-flex align-items-center">
                                                                <i class="fa-duotone fa-compact-disc text-primary lead pe-1 me-2"></i>

                                                                <h5 class="h5 mb-0">{{ 'site.cp.service.tab.proxmox.reinstall.iso' | language }}</h5>
                                                                <div class="btn-group me-2 mb-2 ms-auto"
                                                                     style="display:none">
                                                                    <button class="btn btn-dark btn-icon"
                                                                            id="addIsoBtn"><i class="fa fa-pen"></i>
                                                                    </button>
                                                                </div>
                                                                <div class="btn-group me-2 mb-2 ms-auto"
                                                                     style="display:none">
                                                                    <button class="btn btn-danger btn-icon"
                                                                            id="removeIsoBtn"><i
                                                                                class="fa fa-trash"></i>
                                                                    </button>
                                                                </div>

                                                                <div class="modal modal-danger fade" id="addIsoModal"
                                                                     tabindex="-1" role="dialog"
                                                                     aria-labelledby="reinstall" aria-hidden="true">
                                                                    <div class="modal-dialog modal-dialog-centered"
                                                                         role="document">
                                                                        <div class="modal-content">
                                                                            <div class="modal-header">
                                                                                <h5
                                                                                        class="modal-title h6">{{ 'site.cp.service.tab.proxmox.reinstall.iso' | language }}</h5>
                                                                                <button type="button" class="btn-close"
                                                                                        data-bs-dismiss="modal"></button>
                                                                            </div>
                                                                            <div class="modal-body">
                                                                                <div class="row g-1">
                                                                                    <div class="py-3 text-center">
                                                                                        <i class="fa-duotone fa-exclamation-circle fa-4x"></i>
                                                                                        <h5
                                                                                                class="heading h4 mt-4">{{ 'site.cp.service.tab.proxmox.reinstall.iso.modal.warn.title' | language }}</h5>
                                                                                        <p>{{ 'site.cp.service.tab.proxmox.reinstall.iso.modal.warn.description' | language }}</p>
                                                                                    </div>
                                                                                    <div class="form-group">
                                                                                        <label for="addIsoModalIso"
                                                                                               class="form-label">{{ 'site.cp.service.tab.proxmox.reinstall.iso.modal.iso' | language }}</label>
                                                                                        <select id="addIsoModalIso"
                                                                                                class="form-select">
                                                                                            {% for iso in proxmox['internal']['allISO'] %}
                                                                                                <option
                                                                                                        value="{{ iso['key'] }}">{{ iso['name'] }}</option>
                                                                                            {% endfor %}
                                                                                        </select>
                                                                                    </div>

                                                                                </div>
                                                                            </div>
                                                                            <div class="modal-footer">
                                                                                <button type="button"
                                                                                        id="addIsoModalBtn"
                                                                                        class="btn btn-danger">{{ 'site.cp.service.info.reinstall.iso.modal.add' | language }}</button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            {% endif %}
                                        </div>

                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </section>
                </div>
            </div>

        </div>
    </div>
</div>

{% include '/general/footer.twig' %}